<!doctype html>
<html lang="en">

<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <meta charset="utf-8">

    <title>Just Say No!</title>
    <meta name="description" content="Client giving excuses to get free work? Just Say No!">
    <meta name="author" content="Julian de Villiers">

    <link rel="stylesheet" href="css/style.css">

    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
</head>

<body>
    <script src="js/scripts.js"></script>

    <div id="excuse" class="excuse"></div>
    <button id="prev">Prev</button>
    <button id="next">Next</button>
    <div class="excuseBackground"></div>
    <script>
        function readTextFile(file) {
            var rawFile = new XMLHttpRequest();
            rawFile.open("GET", file, false);
            rawFile.onreadystatechange = function () {
                if (rawFile.readyState === 4) {
                    if (rawFile.status === 200 || rawFile.status == 0) {
                        var allText = rawFile.responseText;
                        var excuseArr = allText.split('\n');
                        console.log(excuseArr);

                        var i = 0;
                        initExcuse(0); //show the first photo initially
                        var excuseLength = excuseArr.length;

                        $('#prev').click(function () {
                            i--;
                            if (i == -1) {
                                initExcuse(excuseLength - 1);
                                i = excuseLength - 1;
                            } else {
                                initExcuse(i);
                            }
                        });

                        $('#next').click(function () {
                            i++;
                            if (i == excuseArr.length) {
                                initExcuse(0);
                                i = 0;
                            } else {
                                initExcuse(i);
                            }
                        });

                        function initExcuse(i) {
                            $('#excuse').empty();
                            $('#excuse').append(excuseArr[i]);
                        }

                    }
                }
            }
            rawFile.send(null);
        }

        readTextFile("/excuses.txt");


        window.onerror = function () {
            var message = "Error!"
            alert(message);
            return true;
        };
    </script>
    
</body>
</html>
